import{r as n,j as e,a as I,u as T,c as V,d as q}from"./index-BP6_SQ6o.js";import{l as z}from"./company-logo-KEAY73Y6.js";import{S as j,g as U,U as F,C as M}from"./BufferTool-WPDU8Owu.js";import{t as W,C as H,q as K,v as L,f as Q,I as X}from"./authApi-9kDSgray.js";const{Option:w}=j;function E(t){return t?.type&&(t.type.isSelectOption||t.type.isSelectOptGroup)}const Y=(t,s)=>{var i,r;const{prefixCls:a,className:m,popupClassName:C,dropdownClassName:S,children:x,dataSource:v,dropdownStyle:h,dropdownRender:l,popupRender:g,onDropdownVisibleChange:N,onOpenChange:o,styles:d,classNames:p}=t,u=W(x),f=((i=d?.popup)===null||i===void 0?void 0:i.root)||h,D=((r=p?.popup)===null||r===void 0?void 0:r.root)||C||S,R=g||l,B=o||N;let y;u.length===1&&n.isValidElement(u[0])&&!E(u[0])&&([y]=u);const $=y?()=>y:void 0;let O;u.length&&E(u[0])?O=x:O=v?v.map(c=>{if(n.isValidElement(c))return c;switch(typeof c){case"string":return n.createElement(w,{key:c,value:c},c);case"object":{const{value:b}=c;return n.createElement(w,{key:b,value:b},c.text)}default:return}}):[];const{getPrefixCls:k}=n.useContext(H),_=k("select",a),[A]=K("SelectLike",f?.zIndex);return n.createElement(j,Object.assign({ref:s,suffixIcon:null},L(t,["dataSource","dropdownClassName","popupClassName"]),{prefixCls:_,classNames:{popup:{root:D},root:p?.root},styles:{popup:{root:Object.assign(Object.assign({},f),{zIndex:A})},root:d?.root},className:Q(`${_}-auto-complete`,m),mode:j.SECRET_COMBOBOX_MODE_DO_NOT_USE,popupRender:R,onOpenChange:B,getInputElement:$}),O)},G=n.forwardRef(Y),{Option:Z}=j,J=U(G,"dropdownAlign",t=>L(t,["visible"])),P=G;P.Option=Z;P._InternalPanelDoNotUseOrYouWillBeFired=J;const ee=()=>e.jsxs("header",{className:"header-bar",children:[e.jsxs("div",{className:"header-left",children:[e.jsx("div",{className:"gov-logo",children:e.jsx("img",{src:z,alt:"NIC Logo",className:"header-right-log"})}),e.jsx("div",{className:"header-text",children:e.jsx("h2",{children:"Semaphore GIS Portal"})})]}),e.jsx(F,{})]}),te=({portal:t})=>{I();const s=T(),i=()=>{s(`/gis-dashboard/${t?.portal_nm}`)},r=a=>!a||a.startsWith("http://")||a.startsWith("https://")?a:`http://192.168.0.44/SuV4SaPg${a}`;return e.jsxs(M,{onClick:i,className:"state-card",hoverable:!0,variant:!1,children:[e.jsx("div",{className:"state-img-wpr",children:e.jsx("img",{src:r(t?.portal_logo_img_url),alt:t?.portal_nm,className:"state-image"})}),e.jsx("p",{className:"state-name",children:t?.portal_nm})]})},se=({portalList:t=[]})=>e.jsx("div",{className:"state-grid",children:t.map(s=>e.jsx(te,{portal:s},s?.portal_id))}),oe=()=>e.jsxs("footer",{className:"footer-bar",children:[e.jsxs("p",{children:["Semaphore GIS Portal Â© 2025 ",e.jsx("br",{}),"Designed & Developed by"," ",e.jsx("a",{href:"#",target:"_blank",rel:"noopener noreferrer",children:"Geo-Spatial Technology and Services Division, Semaphore Computers PVT LTD."})]}),e.jsx("span",{children:"3, Gokul Baral Street, 1st Floor, Kolkata 700012"})]}),re=V.injectEndpoints({endpoints:t=>({getPortals:t.query({query:()=>"portal/list/",providesTags:["Portal"]}),getPortalById:t.query({query:s=>`portal/${s}/`,providesTags:(s,i,r)=>[{type:"Portal",id:r}]})})}),{useGetPortalsQuery:ae}=re,de=()=>{const t=I(),{data:s=[],isLoading:i,error:r}=ae(),[a,m]=n.useState([]),[C,S]=n.useState([]);n.useEffect(()=>{document.title="GIS Portal",s.length&&(t(q(s)),m(s))},[s,t]);const x=h=>{const l=h.toLowerCase(),g=s.filter(o=>o.portal_nm.toLowerCase().includes(l)||o.portal_desc.toLowerCase().includes(l)).map(o=>({value:o.portal_id,label:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{children:o.portal_nm}),e.jsx("span",{children:o.portal_desc})]})}));S(g);const N=l?s.filter(o=>o.portal_nm.toLowerCase().includes(l)||o.portal_desc.toLowerCase().includes(l)):s;m(N)},v=h=>{const l=s.filter(g=>g.portal_id===h);m(l)};return i?e.jsx("div",{children:"Loading..."}):r?e.jsxs("div",{children:["Error: ",r.message]}):e.jsxs("div",{className:"gis-portal-container",children:[e.jsx(ee,{}),e.jsx("div",{className:"search-container",children:e.jsx(P,{popupMatchSelectWidth:400,style:{width:400},options:C,onSelect:v,onSearch:x,children:e.jsx(X.Search,{size:"large",placeholder:"Search portals by name or description",enterButton:!0})})}),e.jsx(se,{portalList:a}),e.jsx(oe,{})]})};export{de as default};
