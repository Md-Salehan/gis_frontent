import{r as n,j as e,u as T,a as V,d as $,b as z}from"./index-pkCdzoMC.js";import{l as q}from"./company-logo-KEAY73Y6.js";import{S as v,g as F,A as M,C as U}from"./index-BiONIXtI.js";import{t as W,C as H,o as K,p as E,f as Q,R as X,I as Y}from"./UserOutlined-CauS23kz.js";const{Option:b}=v;function w(s){return s?.type&&(s.type.isSelectOption||s.type.isSelectOptGroup)}const Z=(s,r)=>{var o,t;const{prefixCls:m,className:f,popupClassName:j,dropdownClassName:C,children:g,dataSource:c,dropdownStyle:l,dropdownRender:h,popupRender:S,onDropdownVisibleChange:a,onOpenChange:L,styles:d,classNames:p}=s,u=W(g),x=((o=d?.popup)===null||o===void 0?void 0:o.root)||l,R=((t=p?.popup)===null||t===void 0?void 0:t.root)||j||C,G=S||h,A=L||a;let N;u.length===1&&n.isValidElement(u[0])&&!w(u[0])&&([N]=u);const D=N?()=>N:void 0;let y;u.length&&w(u[0])?y=g:y=c?c.map(i=>{if(n.isValidElement(i))return i;switch(typeof i){case"string":return n.createElement(b,{key:i,value:i},i);case"object":{const{value:_}=i;return n.createElement(b,{key:_,value:_},i.text)}default:return}}):[];const{getPrefixCls:k}=n.useContext(H),P=k("select",m),[B]=K("SelectLike",x?.zIndex);return n.createElement(v,Object.assign({ref:r,suffixIcon:null},E(s,["dataSource","dropdownClassName","popupClassName"]),{prefixCls:P,classNames:{popup:{root:R},root:p?.root},styles:{popup:{root:Object.assign(Object.assign({},x),{zIndex:B})},root:d?.root},className:Q(`${P}-auto-complete`,f),mode:v.SECRET_COMBOBOX_MODE_DO_NOT_USE,popupRender:G,onOpenChange:A,getInputElement:D}),y)},I=n.forwardRef(Z),{Option:J}=v,ee=F(I,"dropdownAlign",s=>E(s,["visible"])),O=I;O.Option=J;O._InternalPanelDoNotUseOrYouWillBeFired=ee;const se=()=>e.jsxs("header",{className:"header-bar",children:[e.jsxs("div",{className:"header-left",children:[e.jsx("div",{className:"gov-logo",children:e.jsx("img",{src:q,alt:"NIC Logo",className:"header-right-log"})}),e.jsx("div",{className:"header-text",children:e.jsx("h2",{children:"Semaphore GIS Portal"})})]}),e.jsx(M,{icon:e.jsx(X,{})})]}),te=({portal:s})=>{console.log(s,"portal in state card");const r=T(),o=()=>{r(`/gis-dashboard/${s?.portal_id}`)};return e.jsxs(U,{onClick:o,className:"state-card",hoverable:!0,variant:!1,children:[e.jsx("img",{src:s?.portal_logo_img_url,alt:s?.portal_nm,className:"state-image"}),e.jsx("p",{className:"state-name",children:s?.portal_nm})]})},oe=({portalList:s=[]})=>{const r=V(),o=t=>{r($(t))};return console.log(s,"portalList in stategrid"),e.jsx("div",{className:"state-grid",children:s.map(t=>e.jsx(te,{portal:t,onClick:()=>o(t)},t?.portal_id))})},ae=()=>e.jsxs("footer",{className:"footer-bar",children:[e.jsxs("p",{children:["Semaphore GIS Portal Â© 2025 ",e.jsx("br",{}),"Designed & Developed by"," ",e.jsx("a",{href:"#",target:"_blank",rel:"noopener noreferrer",children:"Geo-Spatial Technology and Services Division, Semaphore Computers PVT LTD."})]}),e.jsx("span",{children:"3, Gokul Baral Street, 1st Floor, Kolkata 700012"})]}),re=z.injectEndpoints({endpoints:s=>({getPortals:s.query({query:()=>"portal/list/",providesTags:["Portal"]}),getPortalById:s.query({query:r=>`portal/${r}/`,providesTags:(r,o,t)=>[{type:"Portal",id:t}]})})}),{useGetPortalsQuery:ne}=re,pe=()=>{const{data:s=[],isLoading:r,error:o}=ne(),[t,m]=n.useState([]),[f,j]=n.useState([]);n.useEffect(()=>{document.title="GIS Portal",m(s)},[s]);const C=c=>{const l=c.toLowerCase(),h=s.filter(a=>a.portal_nm.toLowerCase().includes(l)||a.portal_desc.toLowerCase().includes(l)).map(a=>({value:a.portal_id,label:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{children:a.portal_nm}),e.jsx("span",{children:a.portal_desc})]})}));j(h);const S=l?s.filter(a=>a.portal_nm.toLowerCase().includes(l)||a.portal_desc.toLowerCase().includes(l)):s;m(S)},g=c=>{const l=s.filter(h=>h.portal_id===c);m(l)};return r?e.jsx("div",{children:"Loading..."}):o?e.jsxs("div",{children:["Error: ",o.message]}):e.jsxs("div",{className:"gis-portal-container",children:[e.jsx(se,{}),e.jsx("div",{className:"search-container",children:e.jsx(O,{popupMatchSelectWidth:400,style:{width:400},options:f,onSelect:g,onSearch:C,children:e.jsx(Y.Search,{size:"large",placeholder:"Search portals by name or description",enterButton:!0})})}),e.jsx(oe,{portalList:t}),e.jsx(ae,{})]})};export{pe as default};
