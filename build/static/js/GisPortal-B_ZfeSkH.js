import{r,j as e,a as I,u as V,c as $,d as q}from"./index-BEshu7i5.js";import{l as z}from"./company-logo-KEAY73Y6.js";import{S as x,g as F,U,C as M,a as W}from"./BufferTool-DvOO40rc.js";import{t as H,C as K,q as Q,v as L,f as X,I as Y}from"./authApi-8tIZ5sXu.js";const{Option:w}=x;function E(s){return s?.type&&(s.type.isSelectOption||s.type.isSelectOptGroup)}const Z=(s,t)=>{var n,l;const{prefixCls:f,className:m,popupClassName:j,dropdownClassName:C,children:h,dataSource:g,dropdownStyle:S,dropdownRender:y,popupRender:i,onDropdownVisibleChange:a,onOpenChange:p,styles:c,classNames:o}=s,u=H(h),v=((n=c?.popup)===null||n===void 0?void 0:n.root)||S,D=((l=o?.popup)===null||l===void 0?void 0:l.root)||j||C,R=i||y,k=p||a;let N;u.length===1&&r.isValidElement(u[0])&&!E(u[0])&&([N]=u);const A=N?()=>N:void 0;let O;u.length&&E(u[0])?O=h:O=g?g.map(d=>{if(r.isValidElement(d))return d;switch(typeof d){case"string":return r.createElement(w,{key:d,value:d},d);case"object":{const{value:b}=d;return r.createElement(w,{key:b,value:b},d.text)}default:return}}):[];const{getPrefixCls:B}=r.useContext(K),_=B("select",f),[T]=Q("SelectLike",v?.zIndex);return r.createElement(x,Object.assign({ref:t,suffixIcon:null},L(s,["dataSource","dropdownClassName","popupClassName"]),{prefixCls:_,classNames:{popup:{root:D},root:o?.root},styles:{popup:{root:Object.assign(Object.assign({},v),{zIndex:T})},root:c?.root},className:X(`${_}-auto-complete`,m),mode:x.SECRET_COMBOBOX_MODE_DO_NOT_USE,popupRender:R,onOpenChange:k,getInputElement:A}),O)},G=r.forwardRef(Z),{Option:J}=x,ee=F(G,"dropdownAlign",s=>L(s,["visible"])),P=G;P.Option=J;P._InternalPanelDoNotUseOrYouWillBeFired=ee;const se=()=>e.jsxs("header",{className:"header-bar",children:[e.jsxs("div",{className:"header-left",children:[e.jsx("div",{className:"gov-logo",children:e.jsx("img",{src:z,alt:"NIC Logo",className:"header-right-log"})}),e.jsx("div",{className:"header-text",children:e.jsx("h2",{children:"Semaphore GIS Portal"})})]}),e.jsx(U,{})]}),te=({portal:s})=>{I();const t=V(),n=()=>{t(`/gis-dashboard${s?.portal_url}`)};return e.jsxs(M,{onClick:n,className:"state-card",hoverable:!0,variant:!1,children:[e.jsx("div",{className:"state-img-wpr",children:e.jsx("img",{src:W(s?.portal_logo_img_url),alt:s?.portal_nm,className:"state-image"})}),e.jsx("p",{className:"state-name",children:s?.portal_nm})]})},oe=({portalList:s=[]})=>e.jsx("div",{className:"state-grid",children:s.map(t=>e.jsx(te,{portal:t},t?.portal_id))}),ae=()=>e.jsxs("footer",{className:"footer-bar",children:[e.jsxs("p",{children:["Semaphore GIS Portal Â© 2025 ",e.jsx("br",{}),"Designed & Developed by"," ",e.jsx("a",{href:"#",target:"_blank",rel:"noopener noreferrer",children:"Geo-Spatial Technology and Services Division, Semaphore Computers PVT LTD."})]}),e.jsx("span",{children:"3, Gokul Baral Street, 1st Floor, Kolkata 700012"})]}),re=$.injectEndpoints({endpoints:s=>({getPortals:s.query({query:()=>"portal/list/",providesTags:["Portal"]}),getPortalById:s.query({query:t=>`portal/${t}/`,providesTags:(t,n,l)=>[{type:"Portal",id:l}]})})}),{useGetPortalsQuery:ne}=re,pe=()=>{const s=I(),{data:t=[],isLoading:n,error:l}=ne(),[f,m]=r.useState([]),[j,C]=r.useState([]),h=async()=>6,g=async()=>{const i=h();console.log("ss1 Async function result:",i);const a=Promise.resolve(i);console.log("ss1 Promise resolved value:",a);const p=await h();console.log("ss12 Value from async function using then (outside):",p)};r.useEffect(()=>{document.title="GIS Portal",g(),t.length&&(s(q(t)),m(t))},[t,s]);const S=i=>{const a=i.toLowerCase(),p=t.filter(o=>o.portal_nm.toLowerCase().includes(a)||o.portal_desc.toLowerCase().includes(a)).map(o=>({value:o.portal_id,label:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{children:o.portal_nm}),e.jsx("span",{children:o.portal_desc})]})}));C(p);const c=a?t.filter(o=>o.portal_nm.toLowerCase().includes(a)||o.portal_desc.toLowerCase().includes(a)):t;m(c)},y=i=>{const a=t.filter(p=>p.portal_id===i);m(a)};return n?e.jsx("div",{children:"Loading..."}):l?e.jsxs("div",{children:["Error: ",l.message]}):e.jsxs("div",{className:"gis-portal-container",children:[e.jsx(se,{}),e.jsx("div",{className:"search-container",children:e.jsx(P,{popupMatchSelectWidth:400,style:{width:400},options:j,onSelect:y,onSearch:S,children:e.jsx(Y.Search,{size:"large",placeholder:"Search portals by name or description",enterButton:!0})})}),e.jsx(oe,{portalList:f}),e.jsx(ae,{})]})};export{pe as default};
